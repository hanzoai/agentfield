agentfield:
  port: 8080
  execution_cleanup:
    enabled: true
    retention_period: 72h
    cleanup_interval: 1h
    batch_size: 200
    preserve_recent_duration: 1h
  execution_queue:
    agent_call_timeout: 1800s  # Timeout for agent HTTP calls (0s or -1s to disable)
    webhook_timeout: 10s          # Per-attempt timeout for webhook deliveries
    webhook_max_attempts: 3       # Number of attempts before marking the webhook as failed
    webhook_retry_backoff: 1s     # Initial backoff between webhook retries (exponential)
    webhook_max_retry_backoff: 5s # Upper bound for webhook retry backoff

ui:
  enabled: true
  mode: "embedded"
  dev_port: 5173

api:
  cors:
    allowed_origins:
      - "http://localhost:3000"
      - "http://localhost:5173"
      - "http://localhost:8080"
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "Origin"
      - "Content-Type"
      - "Accept"
      - "Authorization"
      - "X-Requested-With"
      - "X-API-Key"
      - "X-Admin-Token"
      - "X-Caller-DID"
      - "X-DID-Signature"
      - "X-DID-Timestamp"
    exposed_headers:
      - "Content-Length"
      - "X-Total-Count"
    allow_credentials: true

storage:
  mode: "local"
  local:
    database_path: ""
    kv_store_path: ""
  vector:
    enabled: true
    distance: "cosine"

features:
  did:
    enabled: true
    method: "did:key"
    key_algorithm: "Ed25519"
    derivation_method: "BIP32"
    key_rotation_days: 90
    vc_requirements:
      require_vc_registration: true
      require_vc_execution: true
      require_vc_cross_agent: true
      persist_execution_vc: true
      storage_mode: "inline"
      store_input_output: false
      hash_sensitive_data: true
    keystore:
      type: "local"
      path: "./data/keys"
      encryption: "AES-256-GCM"
      backup_enabled: true
      backup_interval: "24h"
    authorization:
      enabled: true
      did_auth_enabled: true
      domain: "localhost:8080"
      timestamp_window_seconds: 300
      default_approval_duration_hours: 24
      admin_token: "admin-secret"
      internal_token: "internal-secret-token"
      deny_anonymous: true
      tag_approval_rules:
        default_mode: "auto"
        rules:
          - tags: ["sensitive", "financial", "payments"]
            approval: "manual"
            reason: "Sensitive/financial tags require admin review"
          - tags: ["public", "analytics"]
            approval: "auto"
            reason: "Auto-approved"
      access_policies:
        - name: "analytics_to_data_service"
          caller_tags: ["analytics"]
          target_tags: ["data-service"]
          allow_functions: ["query_*", "get_*", "analyze_*"]
          deny_functions: ["delete_*", "update_*"]
          constraints:
            limit:
              operator: "<="
              value: 1000
          action: "allow"
          priority: 100
        - name: "payments_to_payments"
          caller_tags: ["payments"]
          target_tags: ["payments"]
          allow_functions: ["process_*", "get_*"]
          deny_functions: ["refund_*"]
          constraints:
            amount:
              operator: "<="
              value: 10000
          action: "allow"
          priority: 90
  connector:
    enabled: true
    token: "test-connector-token-123"
    capabilities:
      policy_management:
        enabled: true
        read_only: false
      tag_management:
        enabled: true
        read_only: false
      did_management:
        enabled: false
      reasoner_management:
        enabled: true
        read_only: true
      status_read:
        enabled: true
      observability_config:
        enabled: false
